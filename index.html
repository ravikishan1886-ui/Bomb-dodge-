<meta name='viewport' content='width=device-width, initial-scale=1'/><!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Bomb Dodge</title>

<style>
body{
  margin:0;
  font-family:Arial,sans-serif;
  background:#000;
  overflow:hidden;
  color:white;
}

/* Home */
#homePage{
  position:absolute;
  width:100%;
  height:100%;
  background:linear-gradient(to bottom right,#1a1a40,#000);
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
}

#startBtn{
  padding:12px 30px;
  font-size:22px;
  border:none;
  border-radius:15px;
  background:#00bcd4;
  color:white;
  cursor:pointer;
}

/* Game */
#gamePage{
  display:none;
  width:100%;
  height:100%;
  position:relative;
}

canvas{
  display:block;
  margin:auto;
}

/* Top buttons */
#topBar{
  position:absolute;
  top:10px;
  right:10px;
  display:flex;
  gap:10px;
}

.topBtn{
  padding:6px 10px;
  border:none;
  border-radius:8px;
  cursor:pointer;
  background:rgba(0,0,0,0.6);
  color:white;
}

/* Score */
#scoreBoard{
  position:absolute;
  top:10px;
  left:50%;
  transform:translateX(-50%);
  background:rgba(255,255,255,0.15);
  padding:6px 16px;
  border-radius:15px;
}

/* Popups */
.popup{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  background:#111;
  padding:20px;
  border-radius:15px;
  text-align:center;
  display:none;
}

.popup button{
  margin-top:10px;
}
</style>
</head>

<body>

<div id="homePage">
  <h1>üí£ Bomb Dodge</h1>
  <button id="startBtn">Start Game</button>
</div>

<div id="gamePage">
  <div id="scoreBoard">Score: <span id="score">0</span></div>

  <div id="topBar">
    <button class="topBtn" id="pauseBtn">‚è∏</button>
    <button class="topBtn" id="muteBtn">üîä</button>
    <button class="topBtn" id="infoBtn">üìñ</button>
  </div>

  <canvas id="gameCanvas" width="400" height="600"></canvas>

  <div class="popup" id="gameOver">
    <h2>Game Over</h2>
    <button onclick="resetGame()">Restart</button>
  </div>

  <div class="popup" id="infoBox">
    <h3>How to Play</h3>
    <p>‚Ä¢ Drag the orange player<br>
       ‚Ä¢ Dodge falling bombs<br>
       ‚Ä¢ Score increases over time</p>
    <button onclick="closeInfo()">Close</button>
  </div>
</div>

<audio id="bgMusic" loop>
  <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-10.mp3">
</audio>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

const homePage = document.getElementById("homePage");
const gamePage = document.getElementById("gamePage");
const scoreEl = document.getElementById("score");
const gameOverBox = document.getElementById("gameOver");
const infoBox = document.getElementById("infoBox");

const music = document.getElementById("bgMusic");

let player = {x:200,y:540,r:20};
let bombs = [];
let score = 0;
let speed = 2;
let paused = false;
let muted = false;
let gameOver = false;

/* Bomb Image */
const bombImg = new Image();
bombImg.src = "https://i.ibb.co/JjPjmtCH/file-000000009b2c720986848b5859ac63a2.png";

/* Start */
document.getElementById("startBtn").onclick = ()=>{
  homePage.style.display="none";
  gamePage.style.display="block";
  resetGame();
};

/* Buttons */
document.getElementById("pauseBtn").onclick = ()=>{
  paused = !paused;
};

document.getElementById("muteBtn").onclick = ()=>{
  muted = !muted;
  music.muted = muted;
  document.getElementById("muteBtn").textContent = muted ? "üîá":"üîä";
};

document.getElementById("infoBtn").onclick = ()=>{
  paused = true;
  infoBox.style.display="block";
};

function closeInfo(){
  infoBox.style.display="none";
  paused = false;
}

/* Reset */
function resetGame(){
  bombs=[];
  score=0;
  speed=2;
  gameOver=false;
  gameOverBox.style.display="none";
  music.volume=0.5;
  music.play().catch(()=>{});
  requestAnimationFrame(update);
}

/* Bomb */
function addBomb(){
  bombs.push({
    x:Math.random()*360,
    y:-40,
    r:18
  });
}

/* Loop */
function update(){
  if(gameOver) return;
  if(paused){ requestAnimationFrame(update); return; }

  ctx.clearRect(0,0,400,600);

  /* Player */
  ctx.beginPath();
  ctx.arc(player.x,player.y,player.r,0,Math.PI*2);
  ctx.fillStyle="orange";
  ctx.fill();

  /* Bombs */
  bombs.forEach((b,i)=>{
    b.y+=speed;
    ctx.drawImage(bombImg,b.x,b.y,36,36);

    let dx=player.x-(b.x+18);
    let dy=player.y-(b.y+18);
    if(Math.sqrt(dx*dx+dy*dy)<player.r+b.r){
      gameOver=true;
      gameOverBox.style.display="block";
      music.pause();
    }

    if(b.y>620){
      bombs.splice(i,1);
      score++;
      scoreEl.textContent=score;
      if(score%5===0) speed+=0.5;
    }
  });

  if(Math.random()<0.02) addBomb();

  requestAnimationFrame(update);
}

/* Touch */
canvas.addEventListener("touchmove",e=>{
  let r=canvas.getBoundingClientRect();
  player.x=e.touches[0].clientX-r.left;
  player.x=Math.max(player.r,Math.min(400-player.r,player.x));
});
</script>

</body>
</html>